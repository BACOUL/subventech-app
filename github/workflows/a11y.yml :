name: a11y

on:
  push:
    branches: [ main ]
  pull_request:
    branches: [ main ]

jobs:
  a11y:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout
        uses: actions/checkout@v4

      - name: Setup Node
        uses: actions/setup-node@v4
        with:
          node-version: 20

      - name: Install deps
        run: npm ci

      - name: Install Playwright
        run: npm run test:install

      # Option 1 : tester le site construit localement (par défaut)
      - name: Run tests (local build)
        run: npm test

      # Option 2 : pour tester directement le site Vercel prod, dé-commente ces 2 lignes
      # - name: Test against production URL
      #   run: BASE_URL="https://ton-domaine.vercel.app" npx playwright test
